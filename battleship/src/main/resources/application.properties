spring.application.name=battleship

spring.datasource.url=${DB_URL:jdbc:h2:mem:battleship;MODE=MySQL;DATABASE_TO_UPPER=false;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE}
spring.datasource.username=${DB_USERNAME:sa}
spring.datasource.password=${DB_PASSWORD:}

spring.jpa.hibernate.ddl-auto=none
spring.jpa.open-in-view=false

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration

app.jwt.secret=${APP_JWT_SECRET:RGV2UHJvZmlsZVNlY3JldEtleUJhc2U2NA==}
app.jwt.expirationMs=${APP_JWT_EXPIRATION_MS:86400000}

app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:}

springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false

management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true

spring.jpa.properties.hibernate.globally_quoted_identifiers=true

# Server hardening and performance
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css
# Respect X-Forwarded-* when behind reverse proxies / load balancers
server.forward-headers-strategy=framework
# Bind to platform-provided port (Render, etc.)
server.port=${PORT:8080}
# Graceful shutdown
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=20s

# Don't leak internal details in default error responses
server.error.include-message=never
server.error.include-binding-errors=never

# Logging defaults for prod; dev overrides in profile
logging.level.com.mete.battleship=INFO
